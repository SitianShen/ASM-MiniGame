EXE = main.exe 
OBJS = main.obj ldf.obj 
RES = main.res 

LINK_FLAGS = /subsystem:console
ML_FLAGS = /c /coff

$(EXE):$(OBJS) $(RES)
		Link $(LINK_FLAGS) $(OBJS) $(RES)

.asm.obj:
		ml $(ML_FLAGS) $<

.rc.res:
		rc $<

clean:
	del *.res
	del *.obj

# 生成ldf.exe
ldf:
	ml $(ML_FLAGS) ldf.asm
	link $(LINK_FLAGS) ldf.obj
	del *.obj

# 生成lja.exe
lja:
	ml $(ML_FLAGS) lja.asm
	link $(LINK_FLAGS) lja.obj
	del *.obj

# 生成sst.exe
sst:
	ml $(ML_FLAGS) sst.asm
	link $(LINK_FLAGS) sst.obj
	del *.obj

ASM_DEV = main_dev.asm ldf_dev.asm lja_dev.asm sst_dev.asm
OBJS_DEV = main_dev.obj ldf_dev.obj lja_dev.obj sst_dev.obj 

main_dev:
	rc main.rc
	ml $(ML_FLAGS) $(ASM_DEV)
	Link $(LINK_FLAGS) $(OBJS_DEV) $(RES)
	del *.obj

# 生成ldf_dev.exe
ldf_dev:
	ml $(ML_FLAGS) ldf_dev.asm
	link $(LINK_FLAGS) ldf_dev.obj
	del *.obj

# 生成lja_dev.exe
lja_dev:
	ml $(ML_FLAGS) lja_dev.asm
	link $(LINK_FLAGS) lja_dev.obj
	del *.obj

# 生成sst_dev.exe
sst_dev:
	ml $(ML_FLAGS) sst_dev.asm
	link $(LINK_FLAGS) sst_dev.obj
	del *.obj

# # 生成ldf_dev.obj文件
# ldf_obj:
# 	ml $(ML_FLAGS) ldf_dev.asm