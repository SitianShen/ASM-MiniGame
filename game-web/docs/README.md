# Cyberpunk Covid-19

## æ¸¸æˆç•Œé¢

> ä¸€äº›ç®€å•çš„ç•Œé¢å±•ç¤º



## æˆå‘˜ä»‹ç»ä¸åˆ†å·¥

| æœ±å­æ—  | ç»„é•¿ ä»£ç é€»è¾‘è®¾è®¡ ç”¨æˆ·äº¤äº’æ¥å£ æ¸¸æˆèµ„æºç»´æŠ¤       |
| ---- | ----------------------------- |
| æ²ˆæ€ç”œ  | ä¸»è§’ç§»åŠ¨é€»è¾‘ æ¸¸æˆä¸»é¢˜è®¾è®¡UIåˆ¶ä½œ PPTåˆ¶ä½œ       |
| ç½—å®¶å®‰  | ç‰©ä½“ç§»åŠ¨é€»è¾‘ ä¸»è§’çŠ¶æ€é€»è¾‘ GUIç•Œé¢ç¾åŒ–         |
| æ—ä¸œæ–¹  | ç¢°æ’é€»è¾‘ï¼Œæ¸¸æˆéŸ³æ•ˆï¼Œå¼€å‘æ¶æ„è®¾è®¡ï¼Œæ¸¸æˆæ–‡æ¡£ç»´æŠ¤ï¼ŒPPTåˆ¶ä½œ |

## æ¸¸æˆä»‹ç»

> ç®€è¿°è¿™æ¬¾æ¸¸æˆçš„ç‰¹ç‚¹ï¼Œè®¾è®¡æ€è·¯ï¼Œè®¾è®¡ä¸»é¢˜



## æ¸¸æˆç©æ³•

### å•äººæ¨¡å¼ï¼ˆæŠ—ç–«æ¨¡å¼ï¼‰

> ç®€è¿°æ¸¸æˆç©æ³•å’Œè§„åˆ™å³å¯ï¼Œ @smzzl@å¿†è‹¦

æ¸¸æˆé‡Œä½ å°†æ‹¥æœ‰ä¸€è¾†å¯ä»¥å‘å°„å­å¼¹çš„æ•‘æŠ¤è½¦ï¼Œèº²é¿æˆ–æ¶ˆç­ç—…æ¯’ï¼Œé€ ç¦äººç±» !

ç»¿è‰²ç—…æ¯’ï¼Œå¯ç”¨å­å¼¹æ¶ˆç­ï¼Œæ’åˆ°å¾—åˆ†-1

çº¢è‰²ç—…æ¯’ï¼Œéœ€è·³è·ƒèº²é¿ï¼Œæ’åˆ°ç”Ÿå‘½å€¼-1

åŠ é€Ÿè¯æ°´

å‡é€Ÿè¯æ°´

å¥åº·é‡‘å¸ :ä¸€ä¸ªé‡‘å¸+2åˆ†

### åŒäººæ¨¡å¼ï¼ˆå…±ç”Ÿæ¨¡å¼ï¼‰

> ç®€è¿°æ¸¸æˆç©æ³•å’Œè§„åˆ™å³å¯ï¼Œ@smzzl@å¿†è‹¦

ğŸ˜·    2022å¹´12æœˆ7æ—¥èµ·ï¼Œéšç€é˜²ç–«â€œæ–°åæ¡â€çš„å‘å¸ƒï¼Œå›½äººå°†å¼€å¯ä¸ç—…æ¯’å…±ç”Ÿçš„æ—¶ä»£ã€‚å®Œæˆä¸€æ®µæ—¶é—´ Gym æ¨¡å¼çš„ç»ƒä¹ åï¼Œç©å®¶å¯ä»¥è¿›å…¥åŒäººç«èµ›æ¨¡å¼ï¼Œé€‰æ‹©è§’è‰²å±•å¼€å¤§æˆ˜ã€‚

&#x20;      åœ¨å…±ç”Ÿæ—¶ä»£ï¼Œäººç±»å°†å­¦ä¼šå¦‚ä½•ä¸ç—…æ¯’å…±ã€ç”Ÿã€ä¸åˆ«çš„åŒç±»å…±å­˜ã€‚ç—…æ¯’å¯èƒ½ä¸å†æ˜¯äººç±»çš„æ•Œäººã€‚ç›¸åï¼Œéè‡´å‘½ç»¿è‰²ç—…æ¯’ä¼šå¢åŠ äººç±»çš„å…ç–«åŠ›(ç»éªŒå€¼)ï¼Œä¹Ÿèƒ½ä½¿äººæ‹¥æœ‰æ”»å‡»å¯¹æ‰‹(æ„ŸæŸ“å¯¹æ‰‹)çš„èƒ½åŠ›ã€‚

æ“ä½œæŒ‡ç¤ºï¼š

&#x20;                     å·¦å³ç§»/è·³è·ƒ   ç¡®å®š/å‘å°„å­å¼¹ &#x20;

&#x20;ç©å®¶1            WASD            Space

&#x20;    ç©å®¶2            ä¸Šä¸‹å·¦å³         Enter

åœ¨å…±ç”Ÿæ¨¡å¼é‡Œï¼Œæ‚¨å¤„åœ¨ä¸€ä¸ªä¸ç—…æ¯’å…±ç”Ÿçš„ä¸–ç•Œé‡Œï¼Œåˆå§‹çŠ¶æ€ä¸ºæš´éœ²æœŸ

è¯ï¼Œä»…å½“æ„ŸæŸ“æœŸæ—¶ï¼ŒHP+1ï¼Œå›åˆ°å…ç–«æœŸï¼Œæ— æ•Œï¼

çº¢è‰²ç—…æ¯’ï¼Œå˜ä¸ºæ„ŸæŸ“æœŸï¼

ç»¿è‰²ç—…æ¯’ï¼Œå˜ä¸ºæ— ç—‡çŠ¶ï¼Œexp+1ï¼

å£ç½©ï¼Œé®æŒ¡å¯¹æ–¹ç©å®¶è§†é‡3s

æµ‹æ¸©è®¡ï¼Œå¯¹æ–¹ç©å®¶å·¦å³æ–¹å‘é”®ç½®å3s

## å•äººæ¨¡å¼ï¼ˆæŠ—ç–«æ¨¡å¼ï¼‰

### æ¸¸æˆè®¾è®¡æ€è·¯

> ä¸»è¦å†™æ¸¸æˆè®¾è®¡ï¼Œå¯¹æ¯ä¸€ç§é“å…·çš„è®¾è®¡ç­‰@smzzl



### é“å…·æ•ˆæœ

| ç›¾ç‰Œï¼ˆé‡‘å¸ï¼‰    | åŠ 2åˆ†     |
| --------- | ------- |
| è“è‰²è¯æ°´      | åŠ é€Ÿ      |
| ç²‰è‰²è¯æ°´      | å‡é€Ÿ      |
| çº¢è‰²ç—…æ¯’ï¼ˆç¡¬éšœç¢ï¼‰ | HP-1    |
| ç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰ | æ‰£1åˆ†     |
| å­å¼¹        | å¯æ¶ˆç­ç»¿è‰²ç—…æ¯’ |

| è¯    | éå…ç–«æœŸï¼ŒçŠ¶æ€æ”¹ä¸ºå…ç–«æœŸï¼Œä»…å½“æ„ŸæŸ“æœŸæ—¶ï¼ŒHP+1                                                        |
| ---- | ------------------------------------------------------------------------------- |
| çº¢è‰²ç—…æ¯’ | éæ„ŸæŸ“æœŸï¼Œéå…ç–«æœŸï¼ŒHP-1ï¼ŒçŠ¶æ€æ”¹ä¸ºæ„ŸæŸ“æœŸ                                                          |
| ç»¿è‰²ç—…æ¯’ | éæ„ŸæŸ“æœŸï¼Œéå…ç–«æœŸï¼Œexp+1ï¼ŒçŠ¶æ€æ”¹ä¸ºæ— ç—‡çŠ¶                                                         |
| ç«é”…   | æš´éœ²æœŸ-æ— ç—‡çŠ¶ï¼Œæ— ç—‡çŠ¶ç©å®¶ç­‰åŒäºåƒä¸€ä¸ªç»¿è‰²ç—…æ¯’&#xA;æš´éœ²æœŸ-æ„ŸæŸ“æœŸï¼Œæš´éœ²æœŸç©å®¶ç­‰åŒäºåƒä¸€ä¸ªçº¢è‰²ç—…æ¯’&#xA;æ— ç—‡çŠ¶-æ„ŸæŸ“æœŸï¼Œæ— ç—‡çŠ¶ç©å®¶ç­‰åŒäºåƒä¸€ä¸ªçº¢è‰²ç—…æ¯’ |
| å£ç½©   | åƒåˆ°å£ç½©åï¼Œé®æŒ¡å¯¹æ–¹ç©å®¶è§†é‡3s                                                                |
| æµ‹æ¸©è®¡  | åƒåˆ°æµ‹æ¸©è®¡åï¼Œå¯¹æ–¹ç©å®¶å·¦å³æ–¹å‘é”®ç½®å3s                                                            |

### UIè®¾è®¡ä¸éŸ³æ•ˆè®¾è®¡

> UIå…ƒç´ ï¼Œé¡µé¢ä¹‹é—´çš„UIåˆ‡æ¢ï¼ŒéŸ³æ•ˆè®¾è®¡@å¿†è‹¦



### ç»“æ„ä½“è®¾è®¡

```6502&#x20;assembly
 BASE struct
        posx    dd      ? ;ä½ç½®xåæ ‡
        posy    dd      ? ;ä½ç½®yåæ ‡
        lengthx dd      ? ;å›¾ç‰‡çš„width
        lengthy dd      ? ;å›¾ç‰‡çš„;heigth
        alive   dd      ? ;è¡€é‡
        DC      dd      ? ;è®¾å¤‡ä¸Šä¸‹æ–‡
        rel_v   dd      ? ;ç›¸å¯¹é€Ÿåº¦
        course_id       dd      ? ;æ ‡è®°ä½äºå“ªæ¡è·‘é“
BASE ends

;Player
Subject struct 
        base    BASE  <> 
        score           dd      ? ;å¾—åˆ†ï¼ˆscoreï¼‰æˆ–ç»éªŒå€¼ï¼ˆexpï¼‰
        status          dd      ? ;çŠ¶æ€â€”â€”å…ç–«æœŸã€æš´éœ²æœŸã€æ— ç—‡çŠ¶
        has_hotpot      dd      ? ;æ˜¯å¦èšé¤
        has_mask        dd      ? ;å¯¹æ‰‹æ˜¯å¦å¸¦å£ç½©
        has_fever       dd      ? ;å¯¹æ‰‹æ˜¯å¦å‘çƒ­
        
        ;ç§»åŠ¨é€»è¾‘
        flag_movleft    dd      ? ;æ­£åœ¨å‘å·¦ç§»åŠ¨çš„æ ‡è®°
        flag_movright   dd      ? ;æ­£åœ¨å‘å³ç§»åŠ¨çš„æ ‡è®°
        flag_jump       dd      ? ;è·³è·ƒæ ‡è®°
        time_jump       dd      ? ;è®°å½•è·³è·ƒæ—¶é—´
        time_mov        dd      ? ;è®°å½•ç§»åŠ¨æ—¶é—´
Subject ends

;é“å…·å’Œå­å¼¹
Targets struct
        base    BASE  <> 
        typeid  dd      ?
Targets ends

;æŒ‰é’®æ§ä»¶
Button struct 
        base     BASE <>
        DC       dd      ? ;
        DC_      dd      ? ;chosen
        is_click dd      ? ;æŒ‰é’®æ˜¯å¦è¢«ç‚¹å‡»
Button ends

;èƒŒæ™¯å›¾ç‰‡
BackGround struct
        DC_b    dd      ? ;
        DC_pu   dd      ? ;
        DC_pd   dd      ? ;
        DC_i    dd      ? ;
        DC_e    dd      ? ;
        DC_2p_c dd      ? ;
        DC_2p_cc dd     ? ;
BackGround ends

;
Object_DC struct
        env1    dd      ? ;
        env2    dd      ? ;
        env3    dd      ? ;
        sobs    dd      ? ;
        hobs    dd      ? ;
        accp    dd      ? ;
        decp    dd      ? ;
        coin    dd      ? ;
        hp_p    dd      ? ;
        bltL    dd      ? ;
        bltM    dd      ? ;
        bltR    dd      ? ;
Object_DC ends

;-----------------player choose-----------------
PlayerList struct
        DC              dd 4*2 dup(?) ;
        curid           dd ?          ;

        choose_confirm  dd ?          ;
PlayerList ends
```

### ä»£ç æ¶æ„

> ä¸»è¦å†™ä¸€äº›å‡½æ•°ä¹‹é—´çš„è°ƒç”¨å…³ç³»@smzzl



### å‡½æ•°æ¥å£

#### æœ±å­æ—

```6502&#x20;assembly
_Init_bullet proto ;åˆå§‹åŒ–å­å¼¹
_initAll proto ;
_random_object_gene proto, :ptr dword, :ptr dword ;éšæœºç”ŸæˆTargets
_set_char_pos proto ;
_load_button proto :ptr Button, :dword, :dword ;
_load_common_pic proto :dword, :dword ;
_createAll proto ;
_deleteAll proto ;
_Quit proto ;ç»“æŸæ¸¸æˆ
_draw_button proto :ptr Button, :dword, :dword, :dword, :dword ;ç”»æŒ‰é’®
_draw_object proto :dword, :dword, :ptr Subject, :ptr Targets, :dword ;ç”»Targets
_show_score proto :dword ;æ˜¾ç¤ºåˆ†æ•°
_shot_bullet proto ;å‘å°„å­å¼¹
_init_2p_mode proto ;
```

#### æ²ˆæ€ç”œ

```6502&#x20;assembly
_Init_car proto ;å°è½¦åˆå§‹åŒ–
_Move_process proto ;æ¯å¸§æ›´æ–°éƒ½è¦è°ƒç”¨ï¼Œå®ç°è¿ç»­æ€§ç§»åŠ¨æˆ–è·³èµ·
_Action_left proto ;å°è½¦å·¦ç§»
_Action_right proto ;å°è½¦å³ç§»
_Action_jump proto ;å°è½¦è·³è·ƒ
_sst_test proto ;æµ‹è¯•å‡½æ•°
```

#### ç½—å®¶å®‰

```6502&#x20;assembly
_next_position proto :ptr BASE ;å®ç°é“å…·å’Œå­å¼¹ç§»åŠ¨åˆ°æ‰€åœ¨è½¨é“çš„ä¸‹ä¸€ä¸ªä½ç½®
_change_all_position proto ;éå†æ‰€æœ‰é“å…·å’Œå­å¼¹ï¼Œä½¿ä¹‹ç§»åŠ¨
_targets_bullet_out_of_bound proto ;æ¯å¸§åˆ¤æ–­æ‰€æœ‰é“å…·å’Œå­å¼¹æ˜¯å¦è¶Šç•Œ
```

#### æ—ä¸œæ–¹

```6502&#x20;assembly
_collision_Player_with_MONEY_1 proto :ptr Targets ;Playerä¸â€œç›¾ç‰Œï¼ˆé‡‘å¸ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_MONEY_2 proto :ptr Targets ;Playerä¸â€œç›¾ç‰Œï¼ˆé‡‘å¸ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_ACC proto :ptr Targets ;Playerä¸â€œåŠ é€Ÿè¯å‰‚â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_DEC proto :ptr Targets ;Playerä¸â€œå‡é€Ÿè¯å‰‚â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_HARD proto :ptr Targets ;Playerä¸â€œçº¢è‰²ç—…æ¯’ï¼ˆç¡¬éšœç¢ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_SOFT proto :ptr Targets ;Playerä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_bullet_with_SOFT proto :ptr Targets ;bulletä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_two_two_enum proto ;æšä¸¾Playerå’Œæ‰€æœ‰Targetsï¼Œbulletå’Œâ€œçº¢è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€æ˜¯å¦ç¢°æ’

_Open_ALL_SOUND proto ;æ‰“å¼€æ‰€æœ‰å£°éŸ³æ–‡ä»¶
_Close_ALL_SOUND proto ;å…³é—­æ‰€æœ‰å£°éŸ³æ–‡ä»¶

_collision_Player_with_MONEY_1_SOUND proto ;Playerä¸â€œç›¾ç‰Œï¼ˆé‡‘å¸ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_MONEY_2_SOUND proto ;Playerä¸â€œè¯â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_ACC_SOUND proto ;Playerä¸â€œåŠ é€Ÿè¯å‰‚â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_DEC_SOUND proto ;Playerä¸â€œå‡é€Ÿè¯å‰‚â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_HARD_SOUND proto ;Playerä¸â€œçº¢è‰²ç—…æ¯’ï¼ˆç¡¬éšœç¢ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_SOFT_SOUND proto ;Playerä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_bullet_with_SOFT_SOUND proto ;bulletä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ

_Jump_SOUND proto ;è·³è·ƒæ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ
_Launch_SOUND proto ;å‘å°„å­å¼¹æ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ
_CarMove_SOUND proto ;å°è½¦å·¦å³ç§»åŠ¨æ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ

_BGM_SOUND proto ;Playæ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ
_END_SOUND proto ;å¾—åˆ†ç•Œé¢çš„æ—¶å€™è¦æ’­æ”¾
_Gameover_SOUND proto ;HPä¸º0ï¼Œæ¸¸æˆç»“æŸæ—¶è¦æ’­æ”¾çš„éŸ³æ•ˆ
_BeginBGM_SOUND proto ;å¼€å§‹ç•Œé¢ï¼Œé€‰æ‹©Playå’ŒStartè¦æ’­æ”¾è¿™ä¸ªéŸ³æ•ˆ

_Stop_BGM_SOUND proto ;æ¸¸æˆç»“æŸçš„æ—¶å€™StopBGM, æ’­æ”¾END
_Stop_END_SOUND proto ;å¼€å§‹æ–°çš„ä¸€å±€ï¼ŒStopEndï¼Œæ’­æ”¾BGM
_Stop_Gameover_SOUND proto 
_Stop_BeginBGM_SOUND proto ;æŒ‰ä¸‹Playï¼Œå°±è¦å…³é—­BeginBGMï¼Œæ’­æ”¾æ¸¸æˆBGM_collision_Player_with_MONEY_1 proto :ptr Targets ;Playerä¸â€œç›¾ç‰Œï¼ˆé‡‘å¸ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_MONEY_2 proto :ptr Targets ;Playerä¸â€œç›¾ç‰Œï¼ˆé‡‘å¸ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_ACC proto :ptr Targets ;Playerä¸â€œåŠ é€Ÿè¯å‰‚â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_DEC proto :ptr Targets ;Playerä¸â€œå‡é€Ÿè¯å‰‚â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_HARD proto :ptr Targets ;Playerä¸â€œçº¢è‰²ç—…æ¯’ï¼ˆç¡¬éšœç¢ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_SOFT proto :ptr Targets ;Playerä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_collision_bullet_with_SOFT proto :ptr Targets ;bulletä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’æ•ˆæœ
_two_two_enum proto ;æšä¸¾Playerå’Œæ‰€æœ‰Targetsï¼Œbulletå’Œâ€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€ï¼Œæ£€æµ‹ç¢°æ’

_Open_ALL_SOUND proto ;æ‰“å¼€æ‰€æœ‰å£°éŸ³æ–‡ä»¶
_Close_ALL_SOUND proto ;å…³é—­æ‰€æœ‰å£°éŸ³æ–‡ä»¶

_collision_Player_with_MONEY_1_SOUND proto ;Playerä¸â€œç›¾ç‰Œï¼ˆé‡‘å¸ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_MONEY_2_SOUND proto ;Playerä¸â€œè¯â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_ACC_SOUND proto ;Playerä¸â€œåŠ é€Ÿè¯å‰‚â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_DEC_SOUND proto ;Playerä¸â€œå‡é€Ÿè¯å‰‚â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_HARD_SOUND proto ;Playerä¸â€œçº¢è‰²ç—…æ¯’ï¼ˆç¡¬éšœç¢ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_Player_with_SOFT_SOUND proto ;Playerä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ
_collision_bullet_with_SOFT_SOUND proto ;bulletä¸â€œç»¿è‰²ç—…æ¯’ï¼ˆè½¯éšœç¢ï¼‰â€çš„ç¢°æ’éŸ³æ•ˆ

_Jump_SOUND proto ;è·³è·ƒæ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ
_Launch_SOUND proto ;å‘å°„å­å¼¹æ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ
_CarMove_SOUND proto ;å°è½¦å·¦å³ç§»åŠ¨æ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ

_BGM_SOUND proto ;Playæ—¶è¦è§¦å‘è¿™ä¸ªéŸ³æ•ˆ
_END_SOUND proto ;å¾—åˆ†ç•Œé¢çš„æ—¶å€™è¦æ’­æ”¾
_Gameover_SOUND proto ;HPä¸º0ï¼Œæ¸¸æˆç»“æŸæ—¶è¦æ’­æ”¾çš„éŸ³æ•ˆ
_BeginBGM_SOUND proto ;å¼€å§‹ç•Œé¢ï¼Œé€‰æ‹©Playå’ŒStartè¦æ’­æ”¾è¿™ä¸ªéŸ³æ•ˆ

_Stop_BGM_SOUND proto ;æ¸¸æˆç»“æŸçš„æ—¶å€™StopBGM, æ’­æ”¾END
_Stop_END_SOUND proto ;å¼€å§‹æ–°çš„ä¸€å±€ï¼ŒStopEndï¼Œæ’­æ”¾BGM
_Stop_Gameover_SOUND proto 
_Stop_BeginBGM_SOUND proto ;æŒ‰ä¸‹Playï¼Œå°±è¦å…³é—­BeginBGMï¼Œæ’­æ”¾æ¸¸æˆBGM
```



## åŒäººæ¨¡å¼ï¼ˆå…±ç”Ÿæ¨¡å¼ï¼‰

### æ¸¸æˆè®¾è®¡æ€è·¯

> ä¸»è¦å†™æ¸¸æˆè®¾è®¡ï¼Œå¯¹æ¯ä¸€ç§é“å…·çš„è®¾è®¡ç­‰



### é“å…·æ•ˆæœ

| è¯    | éå…ç–«æœŸï¼ŒçŠ¶æ€æ”¹ä¸ºå…ç–«æœŸï¼Œä»…å½“æ„ŸæŸ“æœŸæ—¶ï¼ŒHP+1                                                        |
| ---- | ------------------------------------------------------------------------------- |
| çº¢è‰²ç—…æ¯’ | éæ„ŸæŸ“æœŸï¼Œéå…ç–«æœŸï¼ŒHP-1ï¼ŒçŠ¶æ€æ”¹ä¸ºæ„ŸæŸ“æœŸ                                                          |
| ç»¿è‰²ç—…æ¯’ | éæ„ŸæŸ“æœŸï¼Œéå…ç–«æœŸï¼Œexp+1ï¼ŒçŠ¶æ€æ”¹ä¸ºæ— ç—‡çŠ¶                                                         |
| ç«é”…   | æš´éœ²æœŸ-æ— ç—‡çŠ¶ï¼Œæ— ç—‡çŠ¶ç©å®¶ç­‰åŒäºåƒä¸€ä¸ªç»¿è‰²ç—…æ¯’&#xA;æš´éœ²æœŸ-æ„ŸæŸ“æœŸï¼Œæš´éœ²æœŸç©å®¶ç­‰åŒäºåƒä¸€ä¸ªçº¢è‰²ç—…æ¯’&#xA;æ— ç—‡çŠ¶-æ„ŸæŸ“æœŸï¼Œæ— ç—‡çŠ¶ç©å®¶ç­‰åŒäºåƒä¸€ä¸ªçº¢è‰²ç—…æ¯’ |
| å£ç½©   | åƒåˆ°å£ç½©åï¼Œé®æŒ¡å¯¹æ–¹ç©å®¶è§†é‡3s                                                                |
| æµ‹æ¸©è®¡  | åƒåˆ°æµ‹æ¸©è®¡åï¼Œå¯¹æ–¹ç©å®¶å·¦å³æ–¹å‘é”®ç½®å3s                                                            |

### UIè®¾è®¡ä¸éŸ³æ•ˆè®¾è®¡

> UIå…ƒç´ ä»¥åŠé¡µé¢ä¹‹é—´çš„UIåˆ‡æ¢ï¼Œæ¸¸æˆéŸ³æ•ˆ@å¿†è‹¦



### ä»£ç æ¶æ„

> ä¸»è¦å†™ä¸€äº›å‡½æ•°ä¹‹é—´çš„è°ƒç”¨å…³ç³»



### å‡½æ•°æ¥å£

#### æœ±å­æ—

```6502&#x20;assembly

```

#### æ²ˆæ€ç”œ

```6502&#x20;assembly
;æ¥å—ä¸€ä¸ªSubjectå¯¹è±¡ï¼ˆPlayerï¼‰
_Init_car_symbiotic proto :ptr Subject ;Playeråˆå§‹åŒ–
_Move_process_symbiotic proto :ptr Subject ;Playeræ¯å¸§æ›´æ–°éƒ½è¦è°ƒç”¨ï¼Œå®ç°è¿ç»­æ€§ç§»åŠ¨æˆ–è·³èµ·
_Action_left_symbiotic proto :ptr Subject ;Playerå·¦ç§»
_Action_right_symbiotic proto :ptr Subject ;Playerå³ç§»
_Action_jump_symbiotic proto :ptr Subject ;Playerè·³è·ƒ
_sst_test_symbiotic proto ;æµ‹è¯•å‡½æ•°
```

#### ç½—å®¶å®‰

```6502&#x20;assembly
_hotpot_effect proto :ptr Subject, :ptr Subject ;Playerä¸â€œç«é”…â€çš„ç¢°æ’æ•ˆæœ
_mask_effect proto :ptr Subject, :ptr Subject ;Playerä¸â€œn95å£ç½©â€çš„ç¢°æ’æ•ˆæœ
_fever_effect proto :ptr Subject, :ptr Subject ;Playerä¸â€œæµ‹æ¸©è®¡â€çš„ç¢°æ’æ•ˆæœ
_check_player_effect proto :ptr Subject ;æ›´æ–°ç©å®¶â€œç«é”…â€ã€â€œn95å£ç½©â€å’Œâ€œæµ‹æ¸©è®¡â€œçš„ç¢°æ’æ•ˆæœ
_check_all_effect proto :ptr Subject, :ptr Subject ;æ›´æ–°æ‰€æœ‰ç©å®¶çš„ç¢°æ’æ•ˆæœ
_change_status proto :ptr Subject, :ptr Subject ;ä¸€å®šæ—¶é—´ä¹‹åæ”¹å˜ç©å®¶ä¸ºæš´éœ²çŠ¶æ€
_change_all_position_symbiotic proto ;å…±å­˜æ¨¡å¼ä¸‹æšä¸¾æ‰€æœ‰é“å…·ï¼Œæ”¹å˜å…¶ä½ç½®
_targets_bullet_out_of_bound_symbiotic proto ;å…±å­˜æ¨¡å¼ä¸‹æ¯å¸§åˆ¤æ–­æ‰€æœ‰é“å…·å’Œå­å¼¹æ˜¯å¦è¶Šç•Œ

```

#### æ—ä¸œæ–¹

```6502&#x20;assembly
_collision_Player_with_medicine proto :ptr Subject, :ptr Targets ;Playerä¸â€œè¯â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_redVirus proto :ptr Subject, :ptr Targets ;Playerä¸â€œçº¢è‰²ç—…æ¯’â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_greenVirus proto :ptr Subject, :ptr Targets ;Playerä¸â€œç»¿è‰²ç—…æ¯’â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_hotPot proto :ptr Subject, :ptr Targets ;Playerä¸â€œç«é”…â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_n95mask proto :ptr Subject, :ptr Targets ;Playerä¸â€œn95å£ç½©â€çš„ç¢°æ’æ•ˆæœ
_collision_Player_with_temperature proto :ptr Subject, :ptr Targets ;Playerä¸â€œæµ‹æ¸©è®¡â€çš„ç¢°æ’æ•ˆæœ
_two_two_enum_symbiotic proto :ptr Subject, :dword, :dword ;æšä¸¾Playerå’Œæ‰€æœ‰Targetsï¼Œæ£€æµ‹ç¢°æ’

_Play_medicine_SOUND proto ;ç©å®¶ä¸â€œè¯â€çš„ç¢°æ’éŸ³æ•ˆ
_Stop_medicine_SOUND proto 
_Play_hotPot_SOUND proto ;ç©å®¶ä¸â€œç«é”…â€çš„ç¢°æ’éŸ³æ•ˆ
_Stop_hotPot_SOUND proto
_Play_n95mask_SOUND proto ;ç©å®¶ä¸â€œn95å£ç½©â€çš„ç¢°æ’éŸ³æ•ˆ
_Stop_n95mask_SOUND proto
_Play_temperature_SOUND proto ;ç©å®¶ä¸â€œæµ‹æ¸©è®¡â€çš„ç¢°æ’éŸ³æ•ˆ
_Stop_temperature_SOUND proto
```

## æ¸¸æˆåˆ›æ–°ç‚¹

### æŠ€æœ¯åˆ›æ–°



### æ¶æ„åˆ›æ–°â€”â€”å¹¶å‘è§£è€¦

> æ•´ä¸ªé¡¹ç›®æ¶æ„@Phoenix

![fileDependency_n8xGSiRCvF](https://tvax2.sinaimg.cn/large/008vKTP8ly1h92svau77tj31t117tqal.jpg)

| data.asm | å…¨å±€å˜é‡æ–‡ä»¶  |
| -------- | ------- |
| main.rc  | å…¨å±€èµ„æºæ–‡ä»¶  |
| zzl.asm  | æœ±å­æ—å†™çš„å‡½æ•° |
| sst.asm  | æ²ˆæ€ç”œå†™çš„å‡½æ•° |
| lja.asm  | ç½—å®¶å®‰å†™çš„å‡½æ•° |
| ldf.asm  | æ—ä¸œæ–¹å†™çš„å‡½æ•° |
| main.asm | ä¸»æ–‡ä»¶     |

```makefile
ml /c /coff main.asm release/zzl.asm release/ldf.asm release/lja.asm release/sst.asm data.asm
Link main.obj zzl.obj ldf.obj lja.obj sst.obj main.res 
```

| zzl\_dev.asm | æœ±å­æ—çš„å¼€å‘æµ‹è¯•æ–‡ä»¶ |
| ------------ | ---------- |
| sst\_dev.asm | æ²ˆæ€ç”œçš„å¼€å‘æµ‹è¯•æ–‡ä»¶ |
| lja\_dev.asm | ç½—å®¶å®‰çš„å¼€å‘æµ‹è¯•æ–‡ä»¶ |
| ldf\_dev.asm | æ—ä¸œæ–¹çš„å¼€å‘æµ‹è¯•æ–‡ä»¶ |

```makefile
# ç”Ÿæˆzzl_dev.exe
zzl_dev:
  del *.exe
  rc main.rc
  ml $(ML_FLAGS) dev/zzl_dev.asm data.asm 
  link $(LINK_FLAGS) zzl_dev.obj data.obj main.res
  nmake clean
# zzl_dev.exe

# ç”Ÿæˆldf_dev.exe
ldf_dev:
  del *.exe
  rc main.rc
  ml $(ML_FLAGS) dev/ldf_dev.asm release/lja.asm data.asm
  link $(LINK_FLAGS) ldf_dev.obj lja.obj data.obj main.res
  nmake clean
# ldf_dev.exe

# ç”Ÿæˆlja_dev.exe
lja_dev:
  del *.exe
  rc main.rc
  ml $(ML_FLAGS) dev/lja_dev.asm data.asm
  link $(LINK_FLAGS) lja_dev.obj data.obj main.res
  nmake clean
# lja_dev.exe

# ç”Ÿæˆsst_dev.exe
sst_dev:
  del *.exe
  rc main.rc
  ml $(ML_FLAGS) dev/sst_dev.asm data.asm 
  link $(LINK_FLAGS) sst_dev.obj data.obj main.res
  nmake clean
```

| dev                            | å¼€å‘ç‰ˆ      |
| ------------------------------ | -------- |
| game-web                       | æ¸¸æˆæ–‡æ¡£ç½‘é¡µ   |
| global                         | å…¨å±€ä¾èµ–     |
| release                        | å‘å¸ƒç‰ˆ      |
| resource                       | å›¾ç‰‡èµ„æº     |
| sound                          | éŸ³æ•ˆèµ„æº     |
|                                |          |
| global.inc                     | å…¨å±€ä¾èµ–æ–‡ä»¶   |
| global\_const.inc              | å…¨å±€å¸¸é‡å®šä¹‰æ–‡ä»¶ |
| global\_dev.inc                | å¼€å‘ä¾èµ–     |
| global\_extrn.inc              | å¤–éƒ¨å˜é‡å£°æ˜   |
| global\_fun\_declare.inc       | å‡½æ•°å£°æ˜     |
| global\_head.inc               | å¤´æ–‡ä»¶ä¾èµ–    |
| global\_public.inc             | å…¬æœ‰å˜é‡å£°æ˜   |
| global\_struct\_definition.inc | ç»“æ„ä½“å®šä¹‰    |

```text
asm-game:.
+---dev
|       ldf_dev.asm
|       ldf_gif.cpp
|       lja_dev.asm
|       sst_dev.asm
|       zzl_dev.asm
|       
+---game-web ;æ¸¸æˆæ–‡æ¡£ç½‘é¡µ
|    
+---global
|       global.inc ;å…¨å±€ä¾èµ–
|       global_const.inc ;å…¨å±€å¸¸é‡å®šä¹‰
|       global_dev.inc ;å¼€å‘ä¾èµ–
|       global_extrn.inc ;å¤–éƒ¨å˜é‡å£°æ˜
|       global_fun_declare.inc ;å‡½æ•°å£°æ˜
|       global_head.inc ;ä¾èµ–å¤´æ–‡ä»¶
|       global_public.inc ;å…¬æœ‰å˜é‡å£°æ˜
|       global_struct_definition.inc ;ç»“æ„ä½“å®šä¹‰
|       
+---release
|       ldf.asm
|       lja.asm
|       sst.asm
|       zzl.asm
|       
+---resource
|
\---sound
```

### é¢˜æåˆ›æ–°



### UIåˆ›æ–°


